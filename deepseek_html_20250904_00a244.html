<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ржХрзБрж░ржЖржи ржЕржирж▓рж╛ржЗржи - ржкржмрж┐рждрзНрж░ ржХрзБрж░ржЖржирзЗрж░ ржмрж╛ржВрж▓рж╛ ржЕржирзБржмрж╛ржж ржУ рждрж╛ржлрж╕рзАрж░</title>
    <meta name="description" content="ржкржмрж┐рждрзНрж░ ржХрзБрж░ржЖржи ржмрж╛ржВрж▓рж╛ ржЕржирзБржмрж╛ржж ржПржмржВ рждрж╛ржлрж╕рзАрж░ рж╕рж╣ ржкржбрж╝рзБржи, рж╢рзБржирзБржи ржПржмржВ ржмрзБржЭрзБржиред рж╕ржорзНржкрзВрж░рзНржг ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ ржПржмржВ ржЕржлрж▓рж╛ржЗржи ржЙржкрж▓ржмрзНржзред">
    <meta name="keywords" content="ржХрзБрж░ржЖржи, ржмрж╛ржВрж▓рж╛ ржХрзБрж░ржЖржи, ржЗрж╕рж▓рж╛ржо, ржЖрж▓рзНрж▓рж╛рж╣, ржорзБрж╕рж▓рж┐ржо, ржзрж░рзНржо, ржкржмрж┐рждрзНрж░ ржХрзБрж░ржЖржи">
    <meta name="author" content="ржХрзБрж░ржЖржи ржЕржирж▓рж╛ржЗржи">
    <meta property="og:title" content="ржХрзБрж░ржЖржи ржЕржирж▓рж╛ржЗржи - ржкржмрж┐рждрзНрж░ ржХрзБрж░ржЖржирзЗрж░ ржмрж╛ржВрж▓рж╛ ржЕржирзБржмрж╛ржж">
    <meta property="og:description" content="ржкржмрж┐рждрзНрж░ ржХрзБрж░ржЖржи ржмрж╛ржВрж▓рж╛ ржЕржирзБржмрж╛ржж ржПржмржВ рждрж╛ржлрж╕рзАрж░ рж╕рж╣ ржкржбрж╝рзБржи, рж╢рзБржирзБржи ржПржмржВ ржмрзБржЭрзБржиред">
    <meta property="og:image" content="https://quran-online.netlify.app/images/og-image.jpg">
    <meta property="og:url" content="https://quran-online.netlify.app">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ЁЯУЦ</text></svg>">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <style>
        /* CSS Variables for theming */
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #4CAF50;
            --accent-color: #ff9800;
            --text-color: #333;
            --bg-color: #f8f9fa;
            --card-bg: white;
            --border-radius: 8px;
            --box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        .dark-theme {
            --primary-color: #1a2530;
            --secondary-color: #3e8e41;
            --accent-color: #ffab40;
            --text-color: #f0f0f0;
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .sepia-theme {
            --primary-color: #5a4a42;
            --secondary-color: #8d6e63;
            --accent-color: #a1887f;
            --text-color: #5a4a42;
            --bg-color: #f5ecd9;
            --card-bg: #f9f3e9;
            --box-shadow: 0 2px 10px rgba(90, 74, 66, 0.1);
        }
        
        /* Performance optimized styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            transition: var(--transition);
            overflow-x: hidden;
        }
        
        /* Header styles */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #1a2530 100%);
            color: white;
            padding: 1rem 2rem;
            box-shadow: var(--box-shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            color: var(--secondary-color);
        }
        
        /* Main content area */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 1.5rem;
        }
        
        /* Sidebar */
        .sidebar {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            height: fit-content;
        }
        
        /* Quran display area */
        .quran-display {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow);
            min-height: 500px;
        }
        
        /* Verse styling */
        .verse {
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            background-color: rgba(0, 0, 0, 0.03);
            border-left: 4px solid var(--secondary-color);
            transition: var(--transition);
            position: relative;
        }
        
        /* Arabic text */
        .arabic {
            font-size: 1.8rem;
            text-align: right;
            margin-bottom: 1rem;
            line-height: 2.5;
            font-family: 'Traditional Arabic', 'Scheherazade New', serif;
        }
        
        /* Footer */
        footer {
            background: var(--primary-color);
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 2rem;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .header-container {
                flex-direction: column;
            }
            
            .search-container {
                width: 100%;
                margin: 1rem 0;
            }
            
            nav ul {
                margin-top: 1rem;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .arabic {
                font-size: 1.5rem;
            }
        }
        
        /* Loading animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-book-quran"></i> ржХрзБрж░ржЖржи ржЕржирж▓рж╛ржЗржи
            </div>
            
            <div class="search-container">
                <input type="text" id="search-input" placeholder="рж╕рзВрж░рж╛ ржмрж╛ ржЖрзЯрж╛ржд ржЕржирзБрж╕ржирзНржзрж╛ржи ржХрж░рзБржи...">
                <button id="search-button">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            <nav>
                <ul>
                    <li><a href="#" id="bookmarks-btn">ржмрзБржХржорж╛рж░рзНржХ</a></li>
                    <li class="settings-dropdown">
                        <button class="settings-btn">
                            <i class="fas fa-cog"></i> рж╕рзЗржЯрж┐ржВрж╕
                        </button>
                    </li>
                    <li class="user-menu" id="user-menu" style="display: none;">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <span id="user-name">ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА</span>
                    </li>
                    <li id="login-link">
                        <a href="#" id="login-btn">рж▓ржЧржЗржи / рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h2>рж╕рзВрж░рж╛рж╕ржорзВрж╣</h2>
            <ul class="surah-list" id="surah-list">
                <li class="active">
                    <span>рж╕рзВрж░рж╛ ржЖрж▓-ржлрж╛рждрж┐рж╣рж╛</span>
                    <span class="surah-number">1</span>
                </li>
                <!-- Additional surahs will be loaded by JavaScript -->
            </ul>
        </aside>

        <!-- Main Content Area -->
        <div>
            <!-- Quran Display -->
            <main class="quran-display" id="quran-display">
                <div class="surah-header">
                    <h2>рж╕рзВрж░рж╛ ржЖрж▓-ржлрж╛рждрж┐рж╣рж╛</h2>
                    <p>ржоржХрзНржХрж╛ржпрж╝ ржЕржмрждрзАрж░рзНржг тАв рзн ржЖржпрж╝рж╛ржд</p>
                </div>

                <div class="verse fade-in">
                    <span class="verse-number">1</span>
                    <div class="arabic">╪и┘Р╪│┘Т┘Е┘Р ╪з┘Д┘Д┘О┘С┘З┘Р ╪з┘Д╪▒┘О┘С╪н┘Т┘Е┘О┘░┘Ж┘Р ╪з┘Д╪▒┘О┘С╪н┘Р┘К┘Е┘Р</div>
                    <div class="translation">ржкрж░ржо ржХрж░рзБржгрж╛ржоржпрж╝ ржЕрж╕рзАржо ржжржпрж╝рж╛рж▓рзБ ржЖрж▓рзНрж▓рж╛рж╣рж░ ржирж╛ржорзЗред</div>
                    <div class="transliteration">Bismill─Бhir-Ra─еm─Бnir-Ra─е─лm</div>
                </div>

                <div class="verse fade-in">
                    <span class="verse-number">2</span>
                    <div class="arabic">╪з┘Д┘Т╪н┘О┘Е┘Т╪п┘П ┘Д┘Р┘Д┘О┘С┘З┘Р ╪▒┘О╪и┘Р┘С ╪з┘Д┘Т╪╣┘О╪з┘Д┘О┘Е┘Р┘К┘Ж┘О</div>
                    <div class="translation">рж╕ржорж╕рзНржд ржкрзНрж░рж╢ржВрж╕рж╛ ржЖрж▓рзНрж▓рж╛рж╣рж░ ржЬржирзНржп, ржпрж┐ржирж┐ рж╕ржХрж▓ ржЬржЧрждрзЗрж░ ржкрзНрж░рждрж┐ржкрж╛рж▓ржХред</div>
                    <div class="transliteration">Al-─еamdu lill─Бhi Rabbil-'─Бlam─лn</div>
                </div>
            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p>ржХрзБрж░ржЖржи ржЕржирж▓рж╛ржЗржи - ржЗрж╕рж▓рж╛ржорж┐ржХ ржЬрзНржЮрж╛ржирзЗрж░ ржПржХржЯрж┐ ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржп ржЙрзОрж╕</p>
            <p>&copy; рзирзжрзирзй ржХрзБрж░ржЖржи ржЕржирж▓рж╛ржЗржиред рж╕ржХрж▓ ╨┐╤А╨░╨▓╨░ ╨╖╨░╤Й╨╕╤Й╨╡╨╜╤Лред</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Performance monitoring
        const perf = {
            start: function(name) {
                performance.mark(name + '-start');
            },
            end: function(name) {
                performance.mark(name + '-end');
                performance.measure(name, name + '-start', name + '-end');
            }
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            perf.start('app-init');
            
            // Check if the browser supports service workers
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js')
                    .then(function(registration) {
                        console.log('SW registered: ', registration);
                    }).catch(function(registrationError) {
                        console.log('SW registration failed: ', registrationError);
                    });
            }
            
            // Load initial data
            loadSurahs();
            loadSurah(1);
            
            // Setup event listeners
            setupEventListeners();
            
            // Initialize analytics
            initAnalytics();
            
            perf.end('app-init');
            
            // Log performance metrics
            const metrics = performance.getEntriesByType('measure');
            metrics.forEach(measure => {
                console.log(`${measure.name}: ${measure.duration.toFixed(2)}ms`);
            });
        });

        // Initialize analytics
        function initAnalytics() {
            // Google Analytics (replace with your tracking ID)
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'GA_TRACKING_ID');
            
            // Simple analytics logging
            console.log('Analytics initialized');
            
            // Track page view
            trackEvent('page_view', {
                page_title: document.title,
                page_location: window.location.href
            });
        }

        // Track events
        function trackEvent(eventName, eventParams) {
            // Send to Google Analytics
            if (typeof gtag !== 'undefined') {
                gtag('event', eventName, eventParams);
            }
            
            // Log to console for debugging
            console.log('Event tracked:', eventName, eventParams);
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search functionality
            document.getElementById('search-button').addEventListener('click', performSearch);
            document.getElementById('search-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performSearch();
            });
            
            // Other event listeners will be added here
        }

        // Load all surahs
        async function loadSurahs() {
            try {
                const response = await fetch('https://api.alquran.cloud/v1/surah');
                const data = await response.json();
                
                // Render surah list
                const surahList = document.getElementById('surah-list');
                surahList.innerHTML = ''; // Clear existing list
                
                data.data.forEach(surah => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <span>${surah.englishName} (${surah.name})</span>
                        <span class="surah-number">${surah.number}</span>
                    `;
                    
                    li.addEventListener('click', () => {
                        trackEvent('surah_selected', {
                            surah_number: surah.number,
                            surah_name: surah.englishName
                        });
                        loadSurah(surah.number);
                    });
                    surahList.appendChild(li);
                });
            } catch (error) {
                console.error('Error loading surahs:', error);
                trackEvent('load_error', {
                    error_message: 'Failed to load surahs',
                    error_details: error.message
                });
            }
        }

        // Load a specific surah
        async function loadSurah(surahNumber) {
            try {
                // Show loading state
                document.getElementById('quran-display').innerHTML = `
                    <div class="surah-header">
                        <h2>рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...</h2>
                        <p>ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи</p>
                    </div>
                    <div class="loader"></div>
                `;
                
                const response = await fetch(`https://api.alquran.cloud/v1/surah/${surahNumber}/editions/quran-uthmani,bn.bengali`);
                const data = await response.json();
                
                if (data.code === 200) {
                    displaySurah(data.data);
                    trackEvent('surah_loaded', {
                        surah_number: surahNumber,
                        success: true
                    });
                } else {
                    throw new Error('Surah not found');
                }
            } catch (error) {
                console.error('Error loading surah:', error);
                document.getElementById('quran-display').innerHTML = `
                    <div class="surah-header">
                        <h2>рждрзНрж░рзБржЯрж┐</h2>
                        <p>рж╕рзВрж░рж╛ рж▓рзЛржб ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржЪрзНржЫрзЗ</p>
                    </div>
                `;
                trackEvent('surah_load_error', {
                    surah_number: surahNumber,
                    error_message: error.message
                });
            }
        }

        // Display surah data
        function displaySurah(surahData) {
            const arabicSurah = surahData[0];
            const translationSurah = surahData[1];
            
            // Update surah header
            const headerHTML = `
                <div class="surah-header">
                    <h2>${arabicSurah.englishName} (${arabicSurah.name})</h2>
                    <p>${arabicSurah.revelationType === 'Meccan' ? 'ржоржХрзНржХрж╛ржпрж╝ ржЕржмрждрзАрж░рзНржг' : 'ржоржжрзАржирж╛ржпрж╝ ржЕржмрждрзАрж░рзНржг'} тАв ${arabicSurah.numberOfAyahs} ржЖржпрж╝рж╛ржд</p>
                </div>
            `;
            
            // Generate verses HTML
            let versesHTML = '';
            
            for (let i = 0; i < arabicSurah.ayahs.length; i++) {
                versesHTML += `
                    <div class="verse fade-in" style="animation-delay: ${i * 0.05}s">
                        <span class="verse-number">${arabicSurah.ayahs[i].numberInSurah}</span>
                        <div class="arabic">${arabicSurah.ayahs[i].text}</div>
                        <div class="translation">${translationSurah.ayahs[i].text}</div>
                    </div>
                `;
            }
            
            // Update the display
            document.getElementById('quran-display').innerHTML = headerHTML + versesHTML;
            
            // Track performance
            perf.end('surah-load');
        }

        // Search functionality
        async function performSearch() {
            const query = document.getElementById('search-input').value.trim();
            
            if (query.length === 0) {
                alert('ржЕржирзБрж╕ржирзНржзрж╛ржирзЗрж░ ржЬржирзНржп ржХрж┐ржЫрзБ ржЯрж╛ржЗржк ржХрж░рзБржи');
                return;
            }
            
            try {
                // Show loading state
                document.getElementById('quran-display').innerHTML = `
                    <div class="surah-header">
                        <h2>ржЕржирзБрж╕ржирзНржзрж╛ржи ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ: "${query}"</h2>
                        <p>ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи</p>
                    </div>
                    <div class="loader"></div>
                `;
                
                // Track search event
                trackEvent('search_performed', {
                    search_query: query
                });
                
                // Search in all surahs
                const response = await fetch(`https://api.alquran.cloud/v1/search/${query}/all/en`);
                const data = await response.json();
                
                if (data.code === 200 && data.data.matches.length > 0) {
                    displaySearchResults(data.data.matches, query);
                    trackEvent('search_success', {
                        search_query: query,
                        result_count: data.data.matches.length
                    });
                } else {
                    document.getElementById('quran-display').innerHTML = `
                        <div class="surah-header">
                            <h2>ржЕржирзБрж╕ржирзНржзрж╛ржи ржлрж▓рж╛ржл┘Д</h2>
                            <p>"${query}" ржПрж░ ржЬржирзНржп ржХрзЛржирзЛ ржлрж▓рж╛ржлрж▓ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐</p>
                        </div>
                    `;
                    trackEvent('search_no_results', {
                        search_query: query
                    });
                }
            } catch (error) {
                console.error('Error searching:', error);
                document.getElementById('quran-display').innerHTML = `
                    <div class="surah-header">
                        <h2>рждрзНрж░рзБржЯрж┐</h2>
                        <p>ржЕржирзБрж╕ржирзНржзрж╛ржи ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржЪрзНржЫрзЗ</p>
                    </div>
                `;
                trackEvent('search_error', {
                    search_query: query,
                    error_message: error.message
                });
            }
        }

        // Error handling
        window.addEventListener('error', function(e) {
            console.error('Error:', e.error);
            trackEvent('window_error', {
                error_message: e.error.message,
                error_file: e.filename,
                error_line: e.lineno
            });
        });

        // Unhandled promise rejection
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled promise rejection:', e.reason);
            trackEvent('promise_rejection', {
                error_message: e.reason.message || String(e.reason)
            });
        });
    </script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_TRACKING_ID"></script>
</body>
</html>